{% extends 'basic.html' %}
{% block css %}
    1231231231
{% endblock %}
{% load custom %}
{% block blog-title %}
    mkinght | 运维的日常
{% endblock %}
{% block blog-textwidget %}

    <p style="font-size: 1pc;line-height: 30px;">
        博客使用阿里云主机，大家可以使用我的幸运券 <a style="font-size: 1.5pc;color: #d9534f;"
                                 href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=yw1joxsh&utm_source=yw1joxsh">点击获取~~~百分百中奖
        ！！！</a>

    </p>
{% endblock %}
{% block tags %}


    <canvas width="300" height="300" id="myCanvas">
        <p>Anything in here will be replaced on browsers that support the canvas element</p>
        <ul class="tagcloud">
        </ul>
    </canvas>
    {#  </div>#}
    {# </div>#}

{% endblock %}
{% block category %}
    <ul id="side_category">
    </ul>
{% endblock %}
{% block hot %}
    <li class="list-group-item">
    </li>

{% endblock %}
{% block navbar-nav %}
    <ul class="nav navbar-nav" id="nav_head">
        <li><a href="/">首页</a></li>
    </ul>
{% endblock %}
{% block main %}
    {% for i in posts %}
        <div class="article well clearfix">
            <div class="data-article hidden-xs">
                <span class="month">{{ i.published_date |date:"m" }}月</span>
                <span class="day">{{ i.published_date |date:"d" }}</span>
            </div>
            <div class="title-article">
                <h1>
                    <a class="blog-title"
                       href="{% url 'detail' pk=i.id %}"
                    >{{ i.title }} </a></h1>

            </div>
            <div class="tag-article container">


                    <span class="label label-zan"><i class="fa fa-tags"></i>{{ i.tags }} <a
                            href="{% url 'detail' pk=i.id %}"
                            title="{{ i.title }}" rel="category tag"></a></span>
                    <span class="label label-zan"><i class="fa fa-user"></i> <a
                            href="#" title="由medivh发布" rel="author">{{ i.author }}</a></span>
                <span class="label label-zan"><i class="fa fa-eye"></i> <a>{{ i.views }}</a> views</span>
            </div>
            <div class="content-article">
                <figure class="thumbnail"><a
                        href="{% url 'detail' pk=i.id %}"
                ></a>

                </figure>
                <div class="alert alert-zan">
                    {{ i.brief }}
                </div>
            </div>
            <a class="btn btn-danger pull-right read-more"
               href="{% url 'detail' pk=i.id %}"
               title="详细阅读  {{ i.brief }}">阅读全文 <span class="badge">{{ i.views }}</span></a>
            {#            </section>#}

        </div>

    {% endfor %}
    <div style="float: right;margin-top: -20px;">
        <nav>
            <ul class="pagination">
                {% if posts.has_previous %}
                    <li class="">
                        <a href="?page={{ posts.previous_page_number }}" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% endif %}
                {% for page_num in posts.paginator.page_range %}
                    {% guess_page posts.number page_num %}
                {% endfor %}
                {% if posts.has_next %}
                    <li class="">
                        <a href="?page={{ posts.next_page_number }}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    </div>

{% endblock %}
{% block js %}
    <script>
        $(document).ready(function () {
            if (!$('#myCanvas').tagcanvas({
                        textColour: '#d43f3a',
                        outlineThickness: 1,
                        maxSpeed: 0.02,
                        depth: 0.75,
                    })) {
                // TagCanvas failed to load
                $('#myCanvasContainer').hide();
            }
            // your other jQuery stuff here...
        });
    </script>
    <script>
        //计数器
        function Click(obj) {
            $('.btn btn-danger pull-right read-more').click()
            {
                alert('+1');
            }
            ;

        }

        //获取标签
        function Tags(obj) {
            $.get("/side/", {name: 'tag'}, function (data) {
                var tmp = JSON.parse(data);
                for (let i = 0; i < tmp.length; i++) {
                    var tag = tmp[i].name;
                    html = '<li><a href="/tags/' + tag + '/">' + tag + '</a></li>'
                    $('.tagcloud').append(html);
                }
            });
        }
        ;

        //获取版块
        function Category(obj) {
            $.get("/side/", {name: 'category'}, function (data) {
                var tmp = JSON.parse(data);
                for (let i = 0; i < tmp.length; i++) {
                    var category_name = tmp[i].name;
                    var category_alias = tmp[i].alias;
                    html = ' <li><a href="/category/' + category_name + '/">' + category_alias + '</a></li> '
                    $("#nav_head").append(html);
                    side = ' <li class="cat-item cat-item-313"><a href="/category/' + category_name + '/>' + category_alias + '</a> </li>'
                    $("#side_category").append(html);


                }
            });
        }
        ;

        Tags();
        Category();

    </script>
{% endblock %}